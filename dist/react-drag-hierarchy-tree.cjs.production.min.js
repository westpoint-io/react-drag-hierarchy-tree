"use strict";function n(n){return n&&"object"==typeof n&&"default"in n?n.default:n}Object.defineProperty(exports,"__esModule",{value:!0});var e,t,r,o=require("react"),i=n(o),a=require("react-dnd"),l=require("react-dnd-html5-backend"),c=require("@emotion/react"),d=n(require("@emotion/styled")),u=n(require("clone"));function s(n,e,t,r,o,i,a){try{var l=n[i](a),c=l.value}catch(n){return void t(n)}l.done?e(c):Promise.resolve(c).then(r,o)}function f(n){return function(){var e=this,t=arguments;return new Promise((function(r,o){var i=n.apply(e,t);function a(n){s(i,r,o,a,l,"next",n)}function l(n){s(i,r,o,a,l,"throw",n)}a(void 0)}))}}function p(){return(p=Object.assign||function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n}).apply(this,arguments)}function h(n,e){if(null==n)return{};var t,r,o={},i=Object.keys(n);for(r=0;r<i.length;r++)e.indexOf(t=i[r])>=0||(o[t]=n[t]);return o}function v(n,e){return e||(e=n.slice(0)),n.raw=e,n}function g(n,e){(null==e||e>n.length)&&(e=n.length);for(var t=0,r=new Array(e);t<e;t++)r[t]=n[t];return r}var y,m,b,x,k,C,w,E,_,I,B,L,P=d.div(e||(e=v(["\n  position: relative;\n  margin: 0;\n  padding: 0;\n  list-style-type: none;\n  transition: all 1s ease-in-out;\n\n  &:before,\n  &:after {\n    transition: all 0.35s;\n  }\n\n  padding-top: 20px;\n  display: table;\n\n  &:before {\n    content: '';\n    position: absolute;\n    top: 0;\n    left: 50%;\n    width: 0;\n    height: 20px;\n    border-right: ","\n      solid ",";\n  }\n\n  &:after {\n    content: '';\n    display: table;\n    clear: both;\n  }\n\n  ","\n\n  ","\n"])),(function(n){return n.strokeWidth?n.strokeWidth:"1px"}),(function(n){return n.strokeColor?n.strokeColor:"#000"}),(function(n){return n.reverse&&c.css(t||(t=v(["\n      display: flex;\n      padding-top: 0px;\n      padding-bottom: 20px;\n\n      &:before {\n        content: '';\n        position: absolute;\n        top: unset;\n        bottom: 0;\n        left: 50%;\n        width: 0;\n        height: 20px;\n      }\n    "])))}),(function(n){return n.horizontal&&c.css(r||(r=v(["\n      display: table-cell;\n      padding-top: 0;\n      padding-left: 20px;\n\n      &:before {\n        top: calc(50% + 1px);\n        left: 0;\n        width: 20px;\n        height: 0;\n        border-left: 0;\n        border-top: "," solid\n          ",";\n      }\n\n      &:after {\n        display: none;\n      }\n\n      & > .org-tree-node {\n        display: block;\n        padding-left: 20px;\n      }\n    "])),n.strokeWidth?n.strokeWidth:"1px",n.strokeColor?n.strokeColor:"#000")})),z=function(n){var e=n.list,t=n.data,r=n.prop,o=n.mock,a=n.hierarchyProps;return Array.isArray(e)&&e.length?i.createElement(P,{id:"children_"+t.id,className:"org-tree-node-children",horizontal:!!r.horizontal,reverse:r.reverse,strokeColor:r.strokeColor,strokeWidth:r.strokeWidth},e.map((function(n){return i.createElement(Z,{mock:o,key:n.id,data:n,prop:r,hierarchyProps:a})}))):null},O=(function(n){var e=function(n){var e=Object.prototype,t=e.hasOwnProperty,r="function"==typeof Symbol?Symbol:{},o=r.iterator||"@@iterator",i=r.asyncIterator||"@@asyncIterator",a=r.toStringTag||"@@toStringTag";function l(n,e,t){return Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}),n[e]}try{l({},"")}catch(n){l=function(n,e,t){return n[e]=t}}function c(n,e,t,r){var o=Object.create((e&&e.prototype instanceof s?e:s).prototype),i=new w(r||[]);return o._invoke=function(n,e,t){var r="suspendedStart";return function(o,i){if("executing"===r)throw new Error("Generator is already running");if("completed"===r){if("throw"===o)throw i;return{value:void 0,done:!0}}for(t.method=o,t.arg=i;;){var a=t.delegate;if(a){var l=x(a,t);if(l){if(l===u)continue;return l}}if("next"===t.method)t.sent=t._sent=t.arg;else if("throw"===t.method){if("suspendedStart"===r)throw r="completed",t.arg;t.dispatchException(t.arg)}else"return"===t.method&&t.abrupt("return",t.arg);r="executing";var c=d(n,e,t);if("normal"===c.type){if(r=t.done?"completed":"suspendedYield",c.arg===u)continue;return{value:c.arg,done:t.done}}"throw"===c.type&&(r="completed",t.method="throw",t.arg=c.arg)}}}(n,t,i),o}function d(n,e,t){try{return{type:"normal",arg:n.call(e,t)}}catch(n){return{type:"throw",arg:n}}}n.wrap=c;var u={};function s(){}function f(){}function p(){}var h={};l(h,o,(function(){return this}));var v=Object.getPrototypeOf,g=v&&v(v(E([])));g&&g!==e&&t.call(g,o)&&(h=g);var y=p.prototype=s.prototype=Object.create(h);function m(n){["next","throw","return"].forEach((function(e){l(n,e,(function(n){return this._invoke(e,n)}))}))}function b(n,e){var r;this._invoke=function(o,i){function a(){return new e((function(r,a){!function r(o,i,a,l){var c=d(n[o],n,i);if("throw"!==c.type){var u=c.arg,s=u.value;return s&&"object"==typeof s&&t.call(s,"__await")?e.resolve(s.__await).then((function(n){r("next",n,a,l)}),(function(n){r("throw",n,a,l)})):e.resolve(s).then((function(n){u.value=n,a(u)}),(function(n){return r("throw",n,a,l)}))}l(c.arg)}(o,i,r,a)}))}return r=r?r.then(a,a):a()}}function x(n,e){var t=n.iterator[e.method];if(void 0===t){if(e.delegate=null,"throw"===e.method){if(n.iterator.return&&(e.method="return",e.arg=void 0,x(n,e),"throw"===e.method))return u;e.method="throw",e.arg=new TypeError("The iterator does not provide a 'throw' method")}return u}var r=d(t,n.iterator,e.arg);if("throw"===r.type)return e.method="throw",e.arg=r.arg,e.delegate=null,u;var o=r.arg;return o?o.done?(e[n.resultName]=o.value,e.next=n.nextLoc,"return"!==e.method&&(e.method="next",e.arg=void 0),e.delegate=null,u):o:(e.method="throw",e.arg=new TypeError("iterator result is not an object"),e.delegate=null,u)}function k(n){var e={tryLoc:n[0]};1 in n&&(e.catchLoc=n[1]),2 in n&&(e.finallyLoc=n[2],e.afterLoc=n[3]),this.tryEntries.push(e)}function C(n){var e=n.completion||{};e.type="normal",delete e.arg,n.completion=e}function w(n){this.tryEntries=[{tryLoc:"root"}],n.forEach(k,this),this.reset(!0)}function E(n){if(n){var e=n[o];if(e)return e.call(n);if("function"==typeof n.next)return n;if(!isNaN(n.length)){var r=-1,i=function e(){for(;++r<n.length;)if(t.call(n,r))return e.value=n[r],e.done=!1,e;return e.value=void 0,e.done=!0,e};return i.next=i}}return{next:_}}function _(){return{value:void 0,done:!0}}return f.prototype=p,l(y,"constructor",p),l(p,"constructor",f),f.displayName=l(p,a,"GeneratorFunction"),n.isGeneratorFunction=function(n){var e="function"==typeof n&&n.constructor;return!!e&&(e===f||"GeneratorFunction"===(e.displayName||e.name))},n.mark=function(n){return Object.setPrototypeOf?Object.setPrototypeOf(n,p):(n.__proto__=p,l(n,a,"GeneratorFunction")),n.prototype=Object.create(y),n},n.awrap=function(n){return{__await:n}},m(b.prototype),l(b.prototype,i,(function(){return this})),n.AsyncIterator=b,n.async=function(e,t,r,o,i){void 0===i&&(i=Promise);var a=new b(c(e,t,r,o),i);return n.isGeneratorFunction(t)?a:a.next().then((function(n){return n.done?n.value:a.next()}))},m(y),l(y,a,"Generator"),l(y,o,(function(){return this})),l(y,"toString",(function(){return"[object Generator]"})),n.keys=function(n){var e=[];for(var t in n)e.push(t);return e.reverse(),function t(){for(;e.length;){var r=e.pop();if(r in n)return t.value=r,t.done=!1,t}return t.done=!0,t}},n.values=E,w.prototype={constructor:w,reset:function(n){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(C),!n)for(var e in this)"t"===e.charAt(0)&&t.call(this,e)&&!isNaN(+e.slice(1))&&(this[e]=void 0)},stop:function(){this.done=!0;var n=this.tryEntries[0].completion;if("throw"===n.type)throw n.arg;return this.rval},dispatchException:function(n){if(this.done)throw n;var e=this;function r(t,r){return a.type="throw",a.arg=n,e.next=t,r&&(e.method="next",e.arg=void 0),!!r}for(var o=this.tryEntries.length-1;o>=0;--o){var i=this.tryEntries[o],a=i.completion;if("root"===i.tryLoc)return r("end");if(i.tryLoc<=this.prev){var l=t.call(i,"catchLoc"),c=t.call(i,"finallyLoc");if(l&&c){if(this.prev<i.catchLoc)return r(i.catchLoc,!0);if(this.prev<i.finallyLoc)return r(i.finallyLoc)}else if(l){if(this.prev<i.catchLoc)return r(i.catchLoc,!0)}else{if(!c)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return r(i.finallyLoc)}}}},abrupt:function(n,e){for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r];if(o.tryLoc<=this.prev&&t.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===n||"continue"===n)&&i.tryLoc<=e&&e<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=n,a.arg=e,i?(this.method="next",this.next=i.finallyLoc,u):this.complete(a)},complete:function(n,e){if("throw"===n.type)throw n.arg;return"break"===n.type||"continue"===n.type?this.next=n.arg:"return"===n.type?(this.rval=this.arg=n.arg,this.method="return",this.next="end"):"normal"===n.type&&e&&(this.next=e),u},finish:function(n){for(var e=this.tryEntries.length-1;e>=0;--e){var t=this.tryEntries[e];if(t.finallyLoc===n)return this.complete(t.completion,t.afterLoc),C(t),u}},catch:function(n){for(var e=this.tryEntries.length-1;e>=0;--e){var t=this.tryEntries[e];if(t.tryLoc===n){var r=t.completion;if("throw"===r.type){var o=r.arg;C(t)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(n,e,t){return this.delegate={iterator:E(n),resultName:e,nextLoc:t},"next"===this.method&&(this.arg=void 0),u}},n}(n.exports);try{regeneratorRuntime=e}catch(n){"object"==typeof globalThis?globalThis.regeneratorRuntime=e:Function("r","regeneratorRuntime = r")(e)}}(L={exports:{}}),L.exports),j=d.span(y||(y=v(["\n  position: absolute;\n  display: inline-block;\n  top: 100%;\n  left: 50%;\n  width: 20px;\n  height: 20px;\n  z-index: 10;\n  margin-left: -11px;\n  margin-top: 9px;\n  background-color: ",";\n  border: 1px solid\n    ",";\n  border-radius: 50%;\n  box-shadow: 0 0 2px rgba(0, 0, 0, 0.15);\n  cursor: pointer;\n  transition: all 0.35s ease;\n\n  :hover {\n    filter: brightness(0.9);\n    transform: scale(1.1);\n  }\n\n  :before,\n  :after {\n    content: '';\n    position: absolute;\n  }\n\n  :before {\n    top: 50%;\n    left: 4px;\n    right: 4px;\n    height: 0;\n    border-top: 1px solid\n      ",";\n  }\n\n  :after {\n    top: 4px;\n    left: 50%;\n    bottom: 4px;\n    width: 0;\n    border-left: 1px solid\n      ",";\n  }\n\n  ","\n\n  ","\n"])),(function(n){return n.buttonBackgroundColor?n.buttonBackgroundColor:"#fff"}),(function(n){return n.buttonBorderColor?n.buttonBorderColor:"#ccc"}),(function(n){return n.buttonBorderColor?n.buttonBorderColor:"#ccc"}),(function(n){return n.buttonBorderColor?n.buttonBorderColor:"#ccc"}),(function(n){return n.expanded&&c.css(m||(m=v(["\n      &:after {\n        border: none;\n      }\n    "])))}),(function(n){return n.horizontal&&c.css(b||(b=v(["\n      top: 50%;\n      left: 100%;\n      margin-top: -11px;\n      margin-left: 9px;\n    "])))})),D=d.div(x||(x=v(["\n  position: absolute;\n  display: inline-block;\n  top: 100%;\n  left: 50%;\n  width: 20px;\n  height: 20px;\n  z-index: 10;\n  margin-left: -11px;\n  margin-top: 9px;\n  background-color: #fff;\n  border: 1px solid #ccc;\n  border-radius: 50%;\n  box-shadow: 0 0 2px rgba(0, 0, 0, 0.15);\n  cursor: pointer;\n  transition: all 0.35s ease;\n\n  ","\n"])),(function(n){return n.horizontal&&c.css(k||(k=v(["\n      top: 50%;\n      left: 100%;\n      margin-top: -11px;\n      margin-left: 9px;\n    "])))})),T=function(n){var e=n.setExpand,t=n.expand,r=n.prop,o=r.horizontal,a=r.renderButton;return a?i.createElement(D,{horizontal:!!o},a({isCollapsed:t,onClick:function(n){n.stopPropagation(),e(!t)}})):i.createElement(j,{buttonBorderColor:r.buttonBorderColor||"",buttonBackgroundColor:r.buttonBackgroundColor||"",horizontal:!!o,expanded:t,onClick:function(n){n.stopPropagation(),e(!t)}})},A=d.div(C||(C=v(["\n  position: relative;\n  display: inline-block;\n  cursor: move;\n  z-index: 10;\n  ","\n"])),(function(n){return n.horizontal&&c.css(w||(w=v(["\n      display: table-cell;\n      vertical-align: middle;\n    "])))})),R=d.div(E||(E=v(["\n  background-color: white;\n  cursor: grab;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  padding: 0 15px;\n  min-width: 100px;\n  min-height: 45px;\n  z-index: 100000;\n  text-align: center;\n  color: black;\n  position: relative;\n  box-shadow: 0 1px 5px rgba(0, 0, 0, 0.15);\n  border-radius: 5px;\n\n  // no break line\n  white-space: nowrap;\n  text-overflow: ellipsis;\n\n  &.mock_card {\n    border: 1px solid #7de874;\n  }\n\n  ","\n"])),(function(n){return n.isDragging&&c.css(_||(_=v(["\n      cursor: grabbing;\n    "])))})),N=d.div(I||(I=v(["\n  position: relative;\n  cursor: grab;\n\n  &.mock_card {\n    border: 1px solid #7de874;\n  }\n"]))),S=d.div(B||(B=v(["\n  margin: 0;\n  padding: 0;\n"]))),G=o.createContext({});function W(n){return i.createElement(G.Provider,{value:{index:n.index}},n.children)}var F=function(){return o.useContext(G)},q=o.createContext({});function M(n){var e=n.children,t=n.data,r=n.treeDataRef,a=o.useState(t),l=a[0],c=a[1],d=o.useRef(t);o.useEffect((function(){d.current=l}),[l]);var s=o.useCallback((function(n,e){c((function(t){return t.map((function(t,r){return r===n?e:t}))}))}),[]),f=o.useCallback((function(n){c((function(e){return[].concat(e,[n])}))}),[]),h=o.useCallback((function(n){return d.current[n]}),[]),v=o.useCallback((function(n,e,t,r,o){void 0===r&&(r="add");var i=p({},o||d.current[n]);if((i=u(i)).id===e){if(!r||"replace"===r)return p({},i,t);if(!r||"add"===r)return p({},i,t,{children:[].concat(i.children,t.children?t.children:[])});if(!r||"remove"===r)return p({},i,t,{children:[].concat(i.children.filter((function(n){return t.children?!t.children.map((function(n){return n.id})).includes(n.id):n})))})}if(!i.children)return i;var a=i.children.map((function(o){return v(n,e,t,r,o)}));return p({},i,{children:a||[]})}),[]),y=o.useCallback((function(n,e,t,r){var o=p({},r||d.current[n]);if((o=u(o)).id===e)return p({},o,{children:[].concat(o.children,t||[])});if(!o.children)return o;var i=o.children.map((function(r){return y(n,e,t,r)}));return p({},o,{children:i||[]})}),[]),m=o.useCallback((function(n,e,t,r){var o=p({},r||d.current[n]);if((o=u(o)).id===e)return p({},o,t,{children:[].concat(o.children.filter((function(n){return t?!t.map((function(n){return n})).includes(n.id):!n})))});if(!o.children)return o;var i=o.children.map((function(r){return m(n,e,t,r)}));return p({},o,{children:i||[]})}),[]),b=o.useCallback((function(n,e,t){var r=p({},t||d.current[n]);return function n(t,r,o){void 0===o&&(o=[]);var i=[].concat(o);if(null!=r&&r.id&&i.push(r.id),t.id===e)return{parent:r,path:i};if(null==t||!t.children)return{parent:null,path:[]};var a={parent:null,path:[]};return t.children.map((function(e){var r=n(e,t,i);null!==r.parent&&(a=r)})),a}(r=u(r),null)}),[]),x=o.useCallback((function(n,e,t){var r=p({},t||d.current[n]);return function n(t,r){if(t.id===e)return t;if(null==t||!t.children)return null;var o=null;return t.children.map((function(e){var t=n(e);null!==t&&(o=t)})),o}(r=u(r))}),[]),k=o.useCallback((function(n,e,t,r){return b(n,t,r).path.includes(e)}),[]),C=o.useCallback((function(n,e,t,r){var o=x(n,e,r);return!!o&&!!E(o).includes(t)}),[]),w=o.useCallback((function(n,e,t,r){var o=b(n,t,r).parent;return(null==o?void 0:o.id)===e}),[]),E=o.useCallback((function(n){var e=[];if(!n.children.length)return e;for(var t,r=function(n,e){var t="undefined"!=typeof Symbol&&n[Symbol.iterator]||n["@@iterator"];if(t)return(t=t.call(n)).next.bind(t);if(Array.isArray(n)||(t=function(n,e){if(n){if("string"==typeof n)return g(n,void 0);var t=Object.prototype.toString.call(n).slice(8,-1);return"Object"===t&&n.constructor&&(t=n.constructor.name),"Map"===t||"Set"===t?Array.from(n):"Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t)?g(n,void 0):void 0}}(n))){t&&(n=t);var r=0;return function(){return r>=n.length?{done:!0}:{done:!1,value:n[r++]}}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}(n.children);!(t=r()).done;){var o=E(t.value);e=e.concat(o)}return e.concat(n.children.map((function(n){return n.id})))}),[]);return o.useImperativeHandle(r,(function(){return{findById:x,findParentByChildId:b,removeById:m,editById:v,addChildrenById:y,updateTree:s,getTree:h,getAllChildrenIds:E,isDirectChild:w,isParent:C,isChild:k,addTree:f}}),[x,b,m,v,y,s,h,E,w,C,k,f]),i.createElement(q.Provider,{value:{treesData:l,updateTree:s,editById:v,removeById:m,findParentByChildId:b,findById:x,isDirectChild:w,isChild:k,isParent:C,getTree:h,addChildrenById:y,addTree:f}},e)}var H,Y,U,$,J,K=function(){return o.useContext(q)},Q=["renderCard"],V=function(n){var e=n.data,t=n.setExpand,r=n.expand,l=n.mock,c=n.root,d=n.prop,u=d.renderCard,s=h(d,Q),v=n.hierarchyProps,g=v.hierarchyRef,y=v.draggingItemRef,m=K(),b=m.editById,x=m.isDirectChild,k=m.isParent,C=m.findParentByChildId,w=m.findById,E=m.updateTree,_=F().index,I=e[s.node.label],B=["org-tree-node-label-inner"];l&&B.push("mock_card");var L=a.useDrag((function(){return{type:"box",item:p({},e,{treeIndex:_}),options:{dropEffect:"copy"},canDrag:function(){return!c},collect:function(n){return{isDragging:!!n.isDragging()}}}}),[]),P=L[0].isDragging,z=L[1];o.useEffect((function(){var n=document.getElementById("node-tree-"+e.id);n&&(n.className=P?n.className+" RdtCant-drop":n.className.replace(" RdtCant-drop",""),y.current=e)}),[P]);var j=function(n,e,t){var r=o.useRef(null);function i(){return(i=f(O.mark((function e(){var t,o,i,a=arguments;return O.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:for(t=a.length,o=new Array(t),i=0;i<t;i++)o[i]=a[i];if(!r.current){e.next=4;break}return e.next=4,window.clearTimeout(r.current);case 4:return e.next=6,window.setTimeout((function(){n.apply(void 0,o)}),300);case 6:r.current=e.sent;case 8:case"end":return e.stop()}}),e)})))).apply(this,arguments)}return o.useEffect((function(){return function(){r.current&&window.clearTimeout(r.current)}})),{onDebounce:function(){return i.apply(this,arguments)},onClearDebounce:function(){r.current&&window.clearTimeout(r.current)}}}((function(n){var t="Place here";if(y.current){var r=y.current,o=r.id,i=_!==r.treeIndex||o!==e.id&&!x(_,e.id,o,g.current)&&!k(_,o,e.id,g.current);if(t=y.current.label,!i)return}!function(n,e){var t=document.getElementById("children_"+n);if(t){var r=document.getElementById("label_text_mock"),o=document.getElementById("node-tree-mock");if(!r)return;if(!o)return;r.innerText=e,o.style.display="table-cell",o.id="node-tree-mock-clone";var i=null==o?void 0:o.cloneNode(!0);o.style.display="none",o.id="node-tree-mock";var a=i.lastChild;return a&&i.removeChild(a),void t.appendChild(i)}var l=document.getElementById("node-tree-"+n);if(l){var c=document.getElementById("label_text_child_mock"),d=document.getElementById("children_mock");if(!c)return;if(!d)return;c.innerText=e;var u=d.id;d.id="node-tree-mock-clone";var s=null==d?void 0:d.cloneNode(!0);d.id=u,l.appendChild(s)}}(n,t)})).onDebounce,D=a.useDrop((function(){return{accept:"box",canDrop:function(n){return _!==n.treeIndex||e.id!==n.id&&!x(_,e.id,n.id,g.current)&&!k(_,n.id,e.id,g.current)},drop:function(n){return function(n){var t=n.treeIndex,r=w(t,n.id),o=e,i=t===_,a=C(t,n.id).parent;if(a&&r){var l=p({},a,{children:[].concat(a.children.filter((function(e){return e.id!==n.id})))}),c=b(t,a.id,l,"replace"),d=b(_,o.id,{children:[r]},"add",i?c:void 0);i||E(t,c),E(_,d),s.onChange&&s.onChange(d,{oldRelationship:{parent:a.id,child:r.id},newRelationship:{parent:o.id,child:r.id}})}}(n)},collect:function(n){return{isOver:!!n.isOver(),canDrop:n.canDrop()}}}}),[]),G=D[0],W=G.isOver,q=G.canDrop,M=D[1];return o.useEffect((function(){var n;W?j(e.id):(n=document.getElementById("node-tree-mock-clone"))&&n.remove()}),[W]),i.createElement(A,{id:"label_"+e.id,key:"label_"+e.id,horizontal:!!s.horizontal,className:"org-tree-node-label",ref:M,onClick:function(n){return"function"==typeof s.onClick&&s.onClick(n,e)}},u?i.createElement(N,{key:"label_inner_"+e.id,ref:z},u({isDragging:P,label:I,labelId:"label_text_"+e.id,data:e,isPreviewCard:!!l,isOver:W,canDrop:q,treeIndex:_}),s.collapsable&&!en(e,s)&&i.createElement(T,{setExpand:t,expand:r,data:e,prop:s})):i.createElement(R,{key:"label_inner_"+e.id,ref:z,isDragging:P,className:B.join(" "),style:p({},s.cardStyle,e.style)},i.createElement(S,{id:"label_text_"+e.id},I),s.collapsable&&!en(e,s)&&i.createElement(T,{setExpand:t,expand:r,data:e,prop:s})))},X=d.div(H||(H=v(["\n  position: relative;\n  margin: 0;\n  padding: 0;\n  list-style-type: none;\n  padding-left: 20px;\n\n  &:before,\n  &:after {\n    transition: all 0.35s;\n  }\n\n  padding-top: 20px;\n  display: table-cell;\n  vertical-align: top;\n\n  &.is-leaf,\n  &.collapsed {\n    padding-left: 10px;\n    padding-right: 10px;\n  }\n\n  &:before,\n  &:after {\n    content: '';\n    position: absolute;\n    top: 0;\n    left: 0;\n    width: 50%;\n    height: 19px;\n  }\n\n  &:after {\n    left: 50%;\n    border-left: 1px solid\n      ",";\n  }\n\n  &:not(:first-of-type):before,\n  &:not(:last-of-type):after {\n    border-top: 1px solid\n      ",";\n  }\n\n  // remove the line of the first label\n  &.org-tree-node-first {\n    padding-top: 0;\n\n    &:before,\n    &:after {\n      border-left: none;\n      opacity: 0;\n    }\n  }\n\n  ","\n\n  ","\n\n  .RdtCant-drop {\n    opacity: 0.5;\n    cursor: no-drop;\n    .org-tree-node-label-inner {\n      background-color: #aaaaaa33;\n    }\n    .org-tree-node-label-inner-personal {\n      opacity: 0.5;\n    }\n  }\n"])),(function(n){return n.strokeColor?n.strokeColor:"#000"}),(function(n){return n.strokeColor?n.strokeColor:"#000"}),(function(n){return n.reverse&&c.css(Y||(Y=v(["\n      display: inline-flex;\n      flex-direction: column-reverse;\n      align-items: center;\n      padding-top: 0px;\n      padding-bottom: 20px;\n\n      &:before,\n      &:after {\n        top: unset;\n        bottom: 0;\n      }\n\n      &:not(:first-of-type):before,\n      &:not(:last-of-type):after {\n        border-top: none;\n        border-bottom: 1px solid\n          ",";\n      }\n    "])),n.strokeColor?n.strokeColor:"#000")}),(function(n){return n.horizontal&&c.css(U||(U=v(["\n      display: table-cell;\n      float: none;\n      padding-top: 0;\n      padding-left: 20px;\n\n      &.is-leaf,\n      &.collapsed {\n        padding-top: 10px;\n        padding-bottom: 10px;\n      }\n\n      &:before,\n      &:after {\n        width: 19px;\n        height: 50%;\n      }\n\n      &:after {\n        top: 50%;\n        left: 0;\n        border-left: 0;\n      }\n\n      &:only-child:before {\n        top: 1px;\n        border-bottom: 1px solid\n          ",";\n      }\n\n      &:not(:first-of-type):before,\n      &:not(:last-of-type):after {\n        border-top: 0;\n        border-left: 1px solid ",";\n      }\n\n      &:not(:only-child):after {\n        border-top: 1px solid ",";\n      }\n\n      // remove the line of the first label\n      &.org-tree-node-first {\n        padding-left: 0;\n\n        &:after {\n          border-left: none;\n          opacity: 0;\n        }\n      }\n    "])),n.strokeColor?n.strokeColor:"#000",n.strokeColor?n.strokeColor:"#000",n.strokeColor?n.strokeColor:"#000")})),Z=function(n){var e=n.data,t=n.prop,r=n.first,a=n.mock,l=n.hierarchyProps,c=t.node,d=["org-tree-node"],u=o.useState(!(c.expand in e&&!e[c.expand])),s=u[0],f=u[1];return o.useEffect((function(){f(t.expandAll)}),[t.expandAll]),en(e,t)?d.push("is-leaf"):t.collapsable&&!s&&d.push("collapsed"),r&&d.push("org-tree-node-first"),i.createElement(X,{id:"node-tree-"+e.id,horizontal:t.horizontal,reverse:t.reverse,className:d.join(" "),strokeColor:t.strokeColor,strokeWidth:t.strokeWidth,style:"mock"===e.id?{display:"none"}:{}},i.createElement(V,{hierarchyProps:l,setExpand:f,expand:s,data:e,prop:t,mock:a,root:r}),(!t.collapsable||s)&&i.createElement(z,{data:e,list:e.children,prop:t,mock:a,hierarchyProps:l}))},nn=["hierarchy"],en=function(n,e){var t=e.node;return!(Array.isArray(n[t.children])&&n[t.children].length>0)},tn={id:"mock",label:"Label",children:[{id:"child_mock",label:"Label",children:[]}]},rn=function(n){var e=function(n){var e=F().index,t=K().treesData,r=o.useState(t[e]),i=r[0],a=r[1],l=o.useRef(i),c=o.useRef(null);return o.useEffect((function(){var n=t[e];a(n),l.current=n}),[t]),o.useMemo((function(){return{draggingItemRef:c,hierarchyRef:l,hierarchy:i,setHierarchy:a}}),[c,l,i,a])}(),t=e.hierarchy,r=h(e,nn);return i.createElement(i.Fragment,null,i.createElement(Z,{data:t,hierarchyProps:r,prop:n,first:!0}),i.createElement(Z,{hierarchyProps:r,data:tn,prop:n,mock:!0}))},on=d.div($||($=v(["\n  display: block;\n  padding: 15px;\n"]))),an=d.div(J||(J=v(["\n  display: table;\n  text-align: center;\n\n  &:before,\n  &:after {\n    content: '';\n    display: table;\n  }\n\n  &:after {\n    clear: both;\n  }\n"]))),ln=["data","onClick","collapsable","expandAll","horizontal","reverse"],cn={label:"label",expand:"expand",children:"children"},dn=function(n){var e=n.data,t=n.onClick,r=n.collapsable,a=void 0===r||r,l=n.expandAll,c=void 0===l||l,d=n.horizontal,u=void 0!==d&&d,s=n.reverse,f=void 0!==s&&s,p=h(n,ln),v=o.useState(c),g=v[0],y=v[1],m=cn,b=o.useCallback((function(){var n=document.getElementById("children_"+e.id);y(!n||function(n){return!n})}),[e.id]);return i.createElement(on,{horizontal:u},i.createElement(an,{horizontal:u},i.createElement(rn,Object.assign({data:e,horizontal:u,node:m,reverse:f,onExpandNodes:b,collapsable:a,expandAll:g,onClick:function(n,e){return t&&t(n,e)}},p))))},un=["data","onClick","collapsable","expandAll","horizontal","reverse"];exports.default=o.forwardRef((function(n,e){var t=n.data,r=n.collapsable,o=void 0===r||r,c=n.expandAll,d=void 0===c||c,u=n.horizontal,s=void 0!==u&&u,f=n.reverse,p=void 0!==f&&f,v=h(n,un);if(s&&p)throw new Error("The horizontal and reverse properties cannot be used at the same time");return i.createElement(a.DndProvider,{backend:l.HTML5Backend},i.createElement(M,{data:t,treeDataRef:e},t.map((function(n,e){return i.createElement(W,{key:e,index:e},i.createElement(dn,Object.assign({data:n,collapsable:o,expandAll:d,horizontal:s,reverse:p},v)))}))))})),exports.useTree=function(){return{treeRef:o.useRef(null)}};
//# sourceMappingURL=react-drag-hierarchy-tree.cjs.production.min.js.map
