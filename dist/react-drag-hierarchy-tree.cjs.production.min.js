"use strict";function n(n){return n&&"object"==typeof n&&"default"in n?n.default:n}Object.defineProperty(exports,"__esModule",{value:!0});var e,t,r=require("react"),o=n(r),i=require("react-dnd"),a=require("react-dnd-html5-backend"),l=require("@emotion/react"),c=n(require("@emotion/styled")),d=n(require("clone"));function u(n,e,t,r,o,i,a){try{var l=n[i](a),c=l.value}catch(n){return void t(n)}l.done?e(c):Promise.resolve(c).then(r,o)}function s(n){return function(){var e=this,t=arguments;return new Promise((function(r,o){var i=n.apply(e,t);function a(n){u(i,r,o,a,l,"next",n)}function l(n){u(i,r,o,a,l,"throw",n)}a(void 0)}))}}function f(){return(f=Object.assign||function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n}).apply(this,arguments)}function p(n,e){if(null==n)return{};var t,r,o={},i=Object.keys(n);for(r=0;r<i.length;r++)e.indexOf(t=i[r])>=0||(o[t]=n[t]);return o}function h(n,e){return e||(e=n.slice(0)),n.raw=e,n}function v(n,e){(null==e||e>n.length)&&(e=n.length);for(var t=0,r=new Array(e);t<e;t++)r[t]=n[t];return r}var y,g,m,b,x,k,C,w,E,_,I,B,L=c.div(e||(e=h(["\n  position: relative;\n  margin: 0;\n  padding: 0;\n  list-style-type: none;\n  transition: all 1s ease-in-out;\n\n  &:before,\n  &:after {\n    transition: all 0.35s;\n  }\n\n  padding-top: 20px;\n  display: table;\n\n  &:before {\n    content: '';\n    position: absolute;\n    top: 0;\n    left: 50%;\n    width: 0;\n    height: 20px;\n    border-right: ","\n      solid ",";\n  }\n\n  &:after {\n    content: '';\n    display: table;\n    clear: both;\n  }\n\n  ","\n"])),(function(n){return n.strokeWidth?n.strokeWidth:"1px"}),(function(n){return n.strokeColor?n.strokeColor:"#000"}),(function(n){return n.horizontal&&l.css(t||(t=h(["\n      display: table-cell;\n      padding-top: 0;\n      padding-left: 20px;\n\n      &:before {\n        top: calc(50% + 1px);\n        left: 0;\n        width: 20px;\n        height: 0;\n        border-left: 0;\n        border-top: "," solid\n          ",";\n      }\n\n      &:after {\n        display: none;\n      }\n\n      & > .org-tree-node {\n        display: block;\n        padding-left: 20px;\n      }\n    "])),n.strokeWidth?n.strokeWidth:"1px",n.strokeColor?n.strokeColor:"#000")})),P=function(n){var e=n.list,t=n.data,r=n.prop,i=n.mock,a=n.hierarchyProps;return Array.isArray(e)&&e.length?o.createElement(L,{id:"children_"+t.id,className:"org-tree-node-children",horizontal:!!r.horizontal,strokeColor:r.strokeColor,strokeWidth:r.strokeWidth},e.map((function(n){return o.createElement(V,{mock:i,key:n.id,data:n,prop:r,hierarchyProps:a})}))):null},z=(function(n){var e=function(n){var e=Object.prototype,t=e.hasOwnProperty,r="function"==typeof Symbol?Symbol:{},o=r.iterator||"@@iterator",i=r.asyncIterator||"@@asyncIterator",a=r.toStringTag||"@@toStringTag";function l(n,e,t){return Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}),n[e]}try{l({},"")}catch(n){l=function(n,e,t){return n[e]=t}}function c(n,e,t,r){var o=Object.create((e&&e.prototype instanceof s?e:s).prototype),i=new w(r||[]);return o._invoke=function(n,e,t){var r="suspendedStart";return function(o,i){if("executing"===r)throw new Error("Generator is already running");if("completed"===r){if("throw"===o)throw i;return{value:void 0,done:!0}}for(t.method=o,t.arg=i;;){var a=t.delegate;if(a){var l=x(a,t);if(l){if(l===u)continue;return l}}if("next"===t.method)t.sent=t._sent=t.arg;else if("throw"===t.method){if("suspendedStart"===r)throw r="completed",t.arg;t.dispatchException(t.arg)}else"return"===t.method&&t.abrupt("return",t.arg);r="executing";var c=d(n,e,t);if("normal"===c.type){if(r=t.done?"completed":"suspendedYield",c.arg===u)continue;return{value:c.arg,done:t.done}}"throw"===c.type&&(r="completed",t.method="throw",t.arg=c.arg)}}}(n,t,i),o}function d(n,e,t){try{return{type:"normal",arg:n.call(e,t)}}catch(n){return{type:"throw",arg:n}}}n.wrap=c;var u={};function s(){}function f(){}function p(){}var h={};l(h,o,(function(){return this}));var v=Object.getPrototypeOf,y=v&&v(v(E([])));y&&y!==e&&t.call(y,o)&&(h=y);var g=p.prototype=s.prototype=Object.create(h);function m(n){["next","throw","return"].forEach((function(e){l(n,e,(function(n){return this._invoke(e,n)}))}))}function b(n,e){var r;this._invoke=function(o,i){function a(){return new e((function(r,a){!function r(o,i,a,l){var c=d(n[o],n,i);if("throw"!==c.type){var u=c.arg,s=u.value;return s&&"object"==typeof s&&t.call(s,"__await")?e.resolve(s.__await).then((function(n){r("next",n,a,l)}),(function(n){r("throw",n,a,l)})):e.resolve(s).then((function(n){u.value=n,a(u)}),(function(n){return r("throw",n,a,l)}))}l(c.arg)}(o,i,r,a)}))}return r=r?r.then(a,a):a()}}function x(n,e){var t=n.iterator[e.method];if(void 0===t){if(e.delegate=null,"throw"===e.method){if(n.iterator.return&&(e.method="return",e.arg=void 0,x(n,e),"throw"===e.method))return u;e.method="throw",e.arg=new TypeError("The iterator does not provide a 'throw' method")}return u}var r=d(t,n.iterator,e.arg);if("throw"===r.type)return e.method="throw",e.arg=r.arg,e.delegate=null,u;var o=r.arg;return o?o.done?(e[n.resultName]=o.value,e.next=n.nextLoc,"return"!==e.method&&(e.method="next",e.arg=void 0),e.delegate=null,u):o:(e.method="throw",e.arg=new TypeError("iterator result is not an object"),e.delegate=null,u)}function k(n){var e={tryLoc:n[0]};1 in n&&(e.catchLoc=n[1]),2 in n&&(e.finallyLoc=n[2],e.afterLoc=n[3]),this.tryEntries.push(e)}function C(n){var e=n.completion||{};e.type="normal",delete e.arg,n.completion=e}function w(n){this.tryEntries=[{tryLoc:"root"}],n.forEach(k,this),this.reset(!0)}function E(n){if(n){var e=n[o];if(e)return e.call(n);if("function"==typeof n.next)return n;if(!isNaN(n.length)){var r=-1,i=function e(){for(;++r<n.length;)if(t.call(n,r))return e.value=n[r],e.done=!1,e;return e.value=void 0,e.done=!0,e};return i.next=i}}return{next:_}}function _(){return{value:void 0,done:!0}}return f.prototype=p,l(g,"constructor",p),l(p,"constructor",f),f.displayName=l(p,a,"GeneratorFunction"),n.isGeneratorFunction=function(n){var e="function"==typeof n&&n.constructor;return!!e&&(e===f||"GeneratorFunction"===(e.displayName||e.name))},n.mark=function(n){return Object.setPrototypeOf?Object.setPrototypeOf(n,p):(n.__proto__=p,l(n,a,"GeneratorFunction")),n.prototype=Object.create(g),n},n.awrap=function(n){return{__await:n}},m(b.prototype),l(b.prototype,i,(function(){return this})),n.AsyncIterator=b,n.async=function(e,t,r,o,i){void 0===i&&(i=Promise);var a=new b(c(e,t,r,o),i);return n.isGeneratorFunction(t)?a:a.next().then((function(n){return n.done?n.value:a.next()}))},m(g),l(g,a,"Generator"),l(g,o,(function(){return this})),l(g,"toString",(function(){return"[object Generator]"})),n.keys=function(n){var e=[];for(var t in n)e.push(t);return e.reverse(),function t(){for(;e.length;){var r=e.pop();if(r in n)return t.value=r,t.done=!1,t}return t.done=!0,t}},n.values=E,w.prototype={constructor:w,reset:function(n){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(C),!n)for(var e in this)"t"===e.charAt(0)&&t.call(this,e)&&!isNaN(+e.slice(1))&&(this[e]=void 0)},stop:function(){this.done=!0;var n=this.tryEntries[0].completion;if("throw"===n.type)throw n.arg;return this.rval},dispatchException:function(n){if(this.done)throw n;var e=this;function r(t,r){return a.type="throw",a.arg=n,e.next=t,r&&(e.method="next",e.arg=void 0),!!r}for(var o=this.tryEntries.length-1;o>=0;--o){var i=this.tryEntries[o],a=i.completion;if("root"===i.tryLoc)return r("end");if(i.tryLoc<=this.prev){var l=t.call(i,"catchLoc"),c=t.call(i,"finallyLoc");if(l&&c){if(this.prev<i.catchLoc)return r(i.catchLoc,!0);if(this.prev<i.finallyLoc)return r(i.finallyLoc)}else if(l){if(this.prev<i.catchLoc)return r(i.catchLoc,!0)}else{if(!c)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return r(i.finallyLoc)}}}},abrupt:function(n,e){for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r];if(o.tryLoc<=this.prev&&t.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===n||"continue"===n)&&i.tryLoc<=e&&e<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=n,a.arg=e,i?(this.method="next",this.next=i.finallyLoc,u):this.complete(a)},complete:function(n,e){if("throw"===n.type)throw n.arg;return"break"===n.type||"continue"===n.type?this.next=n.arg:"return"===n.type?(this.rval=this.arg=n.arg,this.method="return",this.next="end"):"normal"===n.type&&e&&(this.next=e),u},finish:function(n){for(var e=this.tryEntries.length-1;e>=0;--e){var t=this.tryEntries[e];if(t.finallyLoc===n)return this.complete(t.completion,t.afterLoc),C(t),u}},catch:function(n){for(var e=this.tryEntries.length-1;e>=0;--e){var t=this.tryEntries[e];if(t.tryLoc===n){var r=t.completion;if("throw"===r.type){var o=r.arg;C(t)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(n,e,t){return this.delegate={iterator:E(n),resultName:e,nextLoc:t},"next"===this.method&&(this.arg=void 0),u}},n}(n.exports);try{regeneratorRuntime=e}catch(n){"object"==typeof globalThis?globalThis.regeneratorRuntime=e:Function("r","regeneratorRuntime = r")(e)}}(B={exports:{}}),B.exports),O=c.span(y||(y=h(["\n  position: absolute;\n  display: inline-block;\n  top: 100%;\n  left: 50%;\n  width: 20px;\n  height: 20px;\n  z-index: 10;\n  margin-left: -11px;\n  margin-top: 9px;\n  background-color: ",";\n  border: 1px solid\n    ",";\n  border-radius: 50%;\n  box-shadow: 0 0 2px rgba(0, 0, 0, 0.15);\n  cursor: pointer;\n  transition: all 0.35s ease;\n\n  :hover {\n    filter: brightness(0.9);\n    transform: scale(1.1);\n  }\n\n  :before,\n  :after {\n    content: '';\n    position: absolute;\n  }\n\n  :before {\n    top: 50%;\n    left: 4px;\n    right: 4px;\n    height: 0;\n    border-top: 1px solid\n      ",";\n  }\n\n  :after {\n    top: 4px;\n    left: 50%;\n    bottom: 4px;\n    width: 0;\n    border-left: 1px solid\n      ",";\n  }\n\n  ","\n\n  ","\n"])),(function(n){return n.buttonBackgroundColor?n.buttonBackgroundColor:"#fff"}),(function(n){return n.buttonBorderColor?n.buttonBorderColor:"#ccc"}),(function(n){return n.buttonBorderColor?n.buttonBorderColor:"#ccc"}),(function(n){return n.buttonBorderColor?n.buttonBorderColor:"#ccc"}),(function(n){return n.expanded&&l.css(g||(g=h(["\n      &:after {\n        border: none;\n      }\n    "])))}),(function(n){return n.horizontal&&l.css(m||(m=h(["\n      top: 50%;\n      left: 100%;\n      margin-top: -11px;\n      margin-left: 9px;\n    "])))})),j=c.div(b||(b=h(["\n  position: absolute;\n  display: inline-block;\n  top: 100%;\n  left: 50%;\n  width: 20px;\n  height: 20px;\n  z-index: 10;\n  margin-left: -11px;\n  margin-top: 9px;\n  background-color: #fff;\n  border: 1px solid #ccc;\n  border-radius: 50%;\n  box-shadow: 0 0 2px rgba(0, 0, 0, 0.15);\n  cursor: pointer;\n  transition: all 0.35s ease;\n\n  ","\n"])),(function(n){return n.horizontal&&l.css(x||(x=h(["\n      top: 50%;\n      left: 100%;\n      margin-top: -11px;\n      margin-left: 9px;\n    "])))})),D=function(n){var e=n.setExpand,t=n.expand,r=n.prop,i=r.horizontal,a=r.renderButton;return a?o.createElement(j,{horizontal:!!i},a({isCollapsed:t,onClick:function(n){n.stopPropagation(),e(!t)}})):o.createElement(O,{buttonBorderColor:r.buttonBorderColor||"",buttonBackgroundColor:r.buttonBackgroundColor||"",horizontal:!!i,expanded:t,onClick:function(n){n.stopPropagation(),e(!t)}})},T=c.div(k||(k=h(["\n  position: relative;\n  display: inline-block;\n  cursor: move;\n  z-index: 10;\n  ","\n"])),(function(n){return n.horizontal&&l.css(C||(C=h(["\n      display: table-cell;\n      vertical-align: middle;\n    "])))})),A=c.div(w||(w=h(["\n  background-color: white;\n  cursor: grab;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  padding: 0 15px;\n  min-width: 100px;\n  min-height: 45px;\n  z-index: 100000;\n  text-align: center;\n  color: black;\n  position: relative;\n  box-shadow: 0 1px 5px rgba(0, 0, 0, 0.15);\n  border-radius: 5px;\n\n  // no break line\n  white-space: nowrap;\n  text-overflow: ellipsis;\n\n  &.mock_card {\n    border: 1px solid #7de874;\n  }\n\n  ","\n"])),(function(n){return n.isDragging&&l.css(E||(E=h(["\n      cursor: grabbing;\n    "])))})),R=c.div(_||(_=h(["\n  position: relative;\n  cursor: grab;\n\n  &.mock_card {\n    border: 1px solid #7de874;\n  }\n"]))),N=c.div(I||(I=h(["\n  margin: 0;\n  padding: 0;\n"]))),S=r.createContext({});function G(n){return o.createElement(S.Provider,{value:{index:n.index}},n.children)}var W=function(){return r.useContext(S)},F=r.createContext({});function q(n){var e=n.children,t=n.data,i=n.treeDataRef,a=r.useState(t),l=a[0],c=a[1],u=r.useRef(t);r.useEffect((function(){u.current=l}),[l]);var s=r.useCallback((function(n,e){c((function(t){return t.map((function(t,r){return r===n?e:t}))}))}),[]),p=r.useCallback((function(n){c((function(e){return[].concat(e,[n])}))}),[]),h=r.useCallback((function(n){return u.current[n]}),[]),y=r.useCallback((function(n,e,t,r,o){void 0===r&&(r="add");var i=f({},o||u.current[n]);if((i=d(i)).id===e){if(!r||"replace"===r)return f({},i,t);if(!r||"add"===r)return f({},i,t,{children:[].concat(i.children,t.children?t.children:[])});if(!r||"remove"===r)return f({},i,t,{children:[].concat(i.children.filter((function(n){return t.children?!t.children.map((function(n){return n.id})).includes(n.id):n})))})}if(!i.children)return i;var a=i.children.map((function(o){return y(n,e,t,r,o)}));return f({},i,{children:a||[]})}),[]),g=r.useCallback((function(n,e,t,r){var o=f({},r||u.current[n]);if((o=d(o)).id===e)return f({},o,{children:[].concat(o.children,t||[])});if(!o.children)return o;var i=o.children.map((function(r){return g(n,e,t,r)}));return f({},o,{children:i||[]})}),[]),m=r.useCallback((function(n,e,t,r){var o=f({},r||u.current[n]);if((o=d(o)).id===e)return f({},o,t,{children:[].concat(o.children.filter((function(n){return t?!t.map((function(n){return n})).includes(n.id):!n})))});if(!o.children)return o;var i=o.children.map((function(r){return m(n,e,t,r)}));return f({},o,{children:i||[]})}),[]),b=r.useCallback((function(n,e,t){var r=f({},t||u.current[n]);return function n(t,r,o){void 0===o&&(o=[]);var i=[].concat(o);if(null!=r&&r.id&&i.push(r.id),t.id===e)return{parent:r,path:i};if(null==t||!t.children)return{parent:null,path:[]};var a={parent:null,path:[]};return t.children.map((function(e){var r=n(e,t,i);null!==r.parent&&(a=r)})),a}(r=d(r),null)}),[]),x=r.useCallback((function(n,e,t){var r=f({},t||u.current[n]);return function n(t,r){if(t.id===e)return t;if(null==t||!t.children)return null;var o=null;return t.children.map((function(e){var t=n(e);null!==t&&(o=t)})),o}(r=d(r))}),[]),k=r.useCallback((function(n,e,t,r){return b(n,t,r).path.includes(e)}),[]),C=r.useCallback((function(n,e,t,r){var o=x(n,e,r);return!!o&&!!E(o).includes(t)}),[]),w=r.useCallback((function(n,e,t,r){var o=b(n,t,r).parent;return(null==o?void 0:o.id)===e}),[]),E=r.useCallback((function(n){var e=[];if(!n.children.length)return e;for(var t,r=function(n,e){var t="undefined"!=typeof Symbol&&n[Symbol.iterator]||n["@@iterator"];if(t)return(t=t.call(n)).next.bind(t);if(Array.isArray(n)||(t=function(n,e){if(n){if("string"==typeof n)return v(n,void 0);var t=Object.prototype.toString.call(n).slice(8,-1);return"Object"===t&&n.constructor&&(t=n.constructor.name),"Map"===t||"Set"===t?Array.from(n):"Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t)?v(n,void 0):void 0}}(n))){t&&(n=t);var r=0;return function(){return r>=n.length?{done:!0}:{done:!1,value:n[r++]}}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}(n.children);!(t=r()).done;){var o=E(t.value);e=e.concat(o)}return e.concat(n.children.map((function(n){return n.id})))}),[]);return r.useImperativeHandle(i,(function(){return{findById:x,findParentByChildId:b,removeById:m,editById:y,addChildrenById:g,updateTree:s,getTree:h,getAllChildrenIds:E,isDirectChild:w,isParent:C,isChild:k,addTree:p}}),[x,b,m,y,g,s,h,E,w,C,k,p]),o.createElement(F.Provider,{value:{treesData:l,updateTree:s,editById:y,removeById:m,findParentByChildId:b,findById:x,isDirectChild:w,isChild:k,isParent:C,getTree:h,addChildrenById:g,addTree:p}},e)}var M,H,Y,U,$=function(){return r.useContext(F)},J=["renderCard"],K=function(n){var e=n.data,t=n.setExpand,a=n.expand,l=n.mock,c=n.root,d=n.prop,u=d.renderCard,h=p(d,J),v=n.hierarchyProps,y=v.hierarchyRef,g=v.draggingItemRef,m=$(),b=m.editById,x=m.isDirectChild,k=m.isParent,C=m.findParentByChildId,w=m.findById,E=m.updateTree,_=W().index,I=e[h.node.label],B=["org-tree-node-label-inner"];l&&B.push("mock_card");var L=i.useDrag((function(){return{type:"box",item:f({},e,{treeIndex:_}),options:{dropEffect:"copy"},canDrag:function(){return!c},collect:function(n){return{isDragging:!!n.isDragging()}}}}),[]),P=L[0].isDragging,O=L[1];r.useEffect((function(){var n=document.getElementById("node-tree-"+e.id);n&&(n.className=P?n.className+" RdtCant-drop":n.className.replace(" RdtCant-drop",""),g.current=e)}),[P]);var j=function(n,e,t){var o=r.useRef(null);function i(){return(i=s(z.mark((function e(){var t,r,i,a=arguments;return z.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:for(t=a.length,r=new Array(t),i=0;i<t;i++)r[i]=a[i];if(!o.current){e.next=4;break}return e.next=4,window.clearTimeout(o.current);case 4:return e.next=6,window.setTimeout((function(){n.apply(void 0,r)}),300);case 6:o.current=e.sent;case 8:case"end":return e.stop()}}),e)})))).apply(this,arguments)}return r.useEffect((function(){return function(){o.current&&window.clearTimeout(o.current)}})),{onDebounce:function(){return i.apply(this,arguments)},onClearDebounce:function(){o.current&&window.clearTimeout(o.current)}}}((function(n){var t="Place here";if(g.current){var r=g.current,o=r.id,i=_!==r.treeIndex||o!==e.id&&!x(_,e.id,o,y.current)&&!k(_,o,e.id,y.current);if(t=g.current.label,!i)return}!function(n,e){var t=document.getElementById("children_"+n);if(t){var r=document.getElementById("label_text_mock"),o=document.getElementById("node-tree-mock");if(!r)return;if(!o)return;r.innerText=e,o.style.display="table-cell",o.id="node-tree-mock-clone";var i=null==o?void 0:o.cloneNode(!0);o.style.display="none",o.id="node-tree-mock";var a=i.lastChild;return a&&i.removeChild(a),void t.appendChild(i)}var l=document.getElementById("node-tree-"+n);if(l){var c=document.getElementById("label_text_child_mock"),d=document.getElementById("children_mock");if(!c)return;if(!d)return;c.innerText=e;var u=d.id;d.id="node-tree-mock-clone";var s=null==d?void 0:d.cloneNode(!0);d.id=u,l.appendChild(s)}}(n,t)})).onDebounce,S=i.useDrop((function(){return{accept:"box",canDrop:function(n){return _!==n.treeIndex||e.id!==n.id&&!x(_,e.id,n.id,y.current)&&!k(_,n.id,e.id,y.current)},drop:function(n){return function(n){var t=n.treeIndex,r=w(t,n.id),o=e,i=t===_,a=C(t,n.id).parent;if(a&&r){var l=f({},a,{children:[].concat(a.children.filter((function(e){return e.id!==n.id})))}),c=b(t,a.id,l,"replace"),d=b(_,o.id,{children:[r]},"add",i?c:void 0);i||E(t,c),E(_,d),h.onChange&&h.onChange(d,{oldRelationship:{parent:a.id,child:r.id},newRelationship:{parent:o.id,child:r.id}})}}(n)},collect:function(n){return{isOver:!!n.isOver(),canDrop:n.canDrop()}}}}),[]),G=S[0],F=G.isOver,q=G.canDrop,M=S[1];return r.useEffect((function(){var n;F?j(e.id):(n=document.getElementById("node-tree-mock-clone"))&&n.remove()}),[F]),o.createElement(T,{id:"label_"+e.id,key:"label_"+e.id,horizontal:!!h.horizontal,className:"org-tree-node-label",ref:M,onClick:function(n){return"function"==typeof h.onClick&&h.onClick(n,e)}},u?o.createElement(R,{key:"label_inner_"+e.id,ref:O},u({isDragging:P,label:I,labelId:"label_text_"+e.id,data:e,isPreviewCard:!!l,isOver:F,canDrop:q,treeIndex:_}),h.collapsable&&!Z(e,h)&&o.createElement(D,{setExpand:t,expand:a,data:e,prop:h})):o.createElement(A,{key:"label_inner_"+e.id,ref:O,isDragging:P,className:B.join(" "),style:f({},h.cardStyle,e.style)},o.createElement(N,{id:"label_text_"+e.id},I),h.collapsable&&!Z(e,h)&&o.createElement(D,{setExpand:t,expand:a,data:e,prop:h})))},Q=c.div(M||(M=h(["\n  position: relative;\n  margin: 0;\n  padding: 0;\n  list-style-type: none;\n  padding-left: 20px;\n\n  &:before,\n  &:after {\n    transition: all 0.35s;\n  }\n\n  padding-top: 20px;\n  display: table-cell;\n  vertical-align: top;\n\n  &.is-leaf,\n  &.collapsed {\n    padding-left: 10px;\n    padding-right: 10px;\n  }\n\n  &:before,\n  &:after {\n    content: '';\n    position: absolute;\n    top: 0;\n    left: 0;\n    width: 50%;\n    height: 19px;\n  }\n\n  &:after {\n    left: 50%;\n    border-left: 1px solid\n      ",";\n  }\n\n  &:not(:first-of-type):before,\n  &:not(:last-of-type):after {\n    border-top: 1px solid\n      ",";\n  }\n\n  // remove the line of the first label\n  &.org-tree-node-first {\n    padding-top: 0;\n\n    &:before,\n    &:after {\n      border-left: none;\n      opacity: 0;\n    }\n  }\n\n  ","\n\n  .RdtCant-drop {\n    opacity: 0.5;\n    cursor: no-drop;\n    .org-tree-node-label-inner {\n      background-color: #aaaaaa33;\n    }\n    .org-tree-node-label-inner-personal {\n      opacity: 0.5;\n    }\n  }\n"])),(function(n){return n.strokeColor?n.strokeColor:"#000"}),(function(n){return n.strokeColor?n.strokeColor:"#000"}),(function(n){return n.horizontal&&l.css(H||(H=h(["\n      display: table-cell;\n      float: none;\n      padding-top: 0;\n      padding-left: 20px;\n\n      &.is-leaf,\n      &.collapsed {\n        padding-top: 10px;\n        padding-bottom: 10px;\n      }\n\n      &:before,\n      &:after {\n        width: 19px;\n        height: 50%;\n      }\n\n      &:after {\n        top: 50%;\n        left: 0;\n        border-left: 0;\n      }\n\n      &:only-child:before {\n        top: 1px;\n        border-bottom: 1px solid\n          ",";\n      }\n\n      &:not(:first-of-type):before,\n      &:not(:last-of-type):after {\n        border-top: 0;\n        border-left: 1px solid ",";\n      }\n\n      &:not(:only-child):after {\n        border-top: 1px solid ",";\n      }\n\n      // remove the line of the first label\n      &.org-tree-node-first {\n        padding-left: 0;\n\n        &:after {\n          border-left: none;\n          opacity: 0;\n        }\n      }\n    "])),n.strokeColor?n.strokeColor:"#000",n.strokeColor?n.strokeColor:"#000",n.strokeColor?n.strokeColor:"#000")})),V=function(n){var e=n.data,t=n.prop,i=n.first,a=n.mock,l=n.hierarchyProps,c=t.node,d=["org-tree-node"],u=r.useState(!(c.expand in e&&!e[c.expand])),s=u[0],f=u[1];return r.useEffect((function(){f(t.expandAll)}),[t.expandAll]),Z(e,t)?d.push("is-leaf"):t.collapsable&&!s&&d.push("collapsed"),i&&d.push("org-tree-node-first"),o.createElement(Q,{id:"node-tree-"+e.id,horizontal:t.horizontal,className:d.join(" "),strokeColor:t.strokeColor,strokeWidth:t.strokeWidth,style:"mock"===e.id?{display:"none"}:{}},o.createElement(K,{hierarchyProps:l,setExpand:f,expand:s,data:e,prop:t,mock:a,root:i}),(!t.collapsable||s)&&o.createElement(P,{data:e,list:e.children,prop:t,mock:a,hierarchyProps:l}))},X=["hierarchy"],Z=function(n,e){var t=e.node;return!(Array.isArray(n[t.children])&&n[t.children].length>0)},nn={id:"mock",label:"Label",children:[{id:"child_mock",label:"Label",children:[]}]},en=function(n){var e=function(n){var e=W().index,t=$().treesData,o=r.useState(t[e]),i=o[0],a=o[1],l=r.useRef(i),c=r.useRef(null);return r.useEffect((function(){var n=t[e];a(n),l.current=n}),[t]),r.useMemo((function(){return{draggingItemRef:c,hierarchyRef:l,hierarchy:i,setHierarchy:a}}),[c,l,i,a])}(),t=e.hierarchy,i=p(e,X);return o.createElement(o.Fragment,null,o.createElement(V,{data:t,hierarchyProps:i,prop:n,first:!0}),o.createElement(V,{hierarchyProps:i,data:nn,prop:n,mock:!0}))},tn=c.div(Y||(Y=h(["\n  display: block;\n  padding: 15px;\n"]))),rn=c.div(U||(U=h(["\n  display: table;\n  text-align: center;\n\n  &:before,\n  &:after {\n    content: '';\n    display: table;\n  }\n\n  &:after {\n    clear: both;\n  }\n"]))),on=["data","onClick","collapsable","expandAll","horizontal"],an={label:"label",expand:"expand",children:"children"},ln=function(n){var e=n.data,t=n.onClick,i=n.collapsable,a=void 0===i||i,l=n.expandAll,c=void 0===l||l,d=n.horizontal,u=void 0!==d&&d,s=p(n,on),f=r.useState(c),h=f[0],v=f[1],y=an,g=r.useCallback((function(){var n=document.getElementById("children_"+e.id);v(!n||function(n){return!n})}),[e.id]);return o.createElement(tn,{horizontal:u},o.createElement(rn,{horizontal:u},o.createElement(en,Object.assign({data:e,horizontal:u,node:y,onExpandNodes:g,collapsable:a,expandAll:h,onClick:function(n,e){return t&&t(n,e)}},s))))},cn=["data","onClick","collapsable","expandAll","horizontal"];exports.default=r.forwardRef((function(n,e){var t=n.data,r=n.collapsable,l=void 0===r||r,c=n.expandAll,d=void 0===c||c,u=n.horizontal,s=void 0!==u&&u,f=p(n,cn);return o.createElement(i.DndProvider,{backend:a.HTML5Backend},o.createElement(q,{data:t,treeDataRef:e},t.map((function(n,e){return o.createElement(G,{key:e,index:e},o.createElement(ln,Object.assign({data:n,collapsable:l,expandAll:d,horizontal:s},f)))}))))})),exports.useTree=function(){return{treeRef:r.useRef(null)}};
//# sourceMappingURL=react-drag-hierarchy-tree.cjs.production.min.js.map
